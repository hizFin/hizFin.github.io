{"componentChunkName":"component---src-templates-post-jsx","path":"/013-connect-upbit-api/","result":{"data":{"site":{"siteMetadata":{"title":"hizFin 저장소"}},"markdownRemark":{"id":"b4703cbe-8633-5d5f-bd57-72546bc63595","excerpt":"코인봇을 만들어 일확천금을 벌어보자.   시스템 환경 : Mac OS(Silicon M1) 1. 업비트 OPEN API KEY 발급받기 업비트 사이트 방문해서 OPEN API 신청 https://www.upbit.com/servicecenter/openapi_guide(업비트 > 고객센터 > Open API 안내 > Open API 사용하기) IP주소 조…","html":"<p>코인봇을 만들어 일확천금을 벌어보자.  </p>\n<p>시스템 환경 : Mac OS(Silicon M1)</p>\n<h2>1. 업비트 OPEN API KEY 발급받기</h2>\n<h3>업비트 사이트 방문해서 OPEN API 신청</h3>\n<p><a href=\"https://www.upbit.com/service_center/open_api_guide\">https://www.upbit.com/service<em>center/open</em>api_guide</a>(업비트 > 고객센터 > Open API 안내 > Open API 사용하기)</p>\n<h3>IP주소 조회</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">curl</span> ifconfig.me</code></pre></div>\n<ul>\n<li>네이버 \"IP주소 확인\" 검색으로도 조회 가능</li>\n</ul>\n<h2>2. API 레퍼런스 확인</h2>\n<p><a href=\"https://docs.upbit.com/reference\">https://docs.upbit.com/reference</a>(고객센터 > Open API 안내 > 업비트 개발자 센터 > API Reference)</p>\n<h2>3. 파이썬 연동하기</h2>\n<h3>현재가 조회</h3>\n<p>먼저 API KEY를 필요로 하지 않는 \"현재가 조회\"부터 진행해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> requests\n\n<span class=\"token comment\"># 현재가 정보조회 </span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">getCurrentAmt</span><span class=\"token punctuation\">(</span>coinCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    url <span class=\"token operator\">=</span> <span class=\"token string\">\"https://api.upbit.com/v1/ticker?markets=\"</span> <span class=\"token operator\">+</span> coinCode\n    headers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"accept\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"application/json\"</span><span class=\"token punctuation\">}</span>\n    response <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n\ngetCurrentAmt<span class=\"token punctuation\">(</span><span class=\"token string\">'KRW-BTC'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#  비트코인 조회</span></code></pre></div>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/c71289aa6612fe4ef96277fa5f9d667a/3e3fe/013-01.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 119.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAABYlAAAWJQFJUiTwAAADzElEQVR42n1VaXMaVxDUL3G5IllYQgKWve/7hl1guSwhW7Yrlfz/P9CZeUILVKJ8mHrwiu3tnu4ZrgaSitupBtPxcEfnH6MpbsYyvkyUs1LxoGmYmPqpLB0jQ8ctPc+/4ZPrakAgg6kOxTWh+jbiZoWgbvBguPBzF+XCR1i6uFd0+p1KL1Mu6h3s/ewBJ44ONbCQd1tUmz3S5Rp6nNGLDOwPMdpNCMm2cD3iB0+MPmQoEaDimwhnC2QEFrcrGEkB2fWQzjzkjQ8zcqB6FviZc8DzugBkhsmiQ7neiTMh0IBe8EXS0KwD7A4hnNQ59lju2X3IUPYMRPMlstUGfjUX8guqkWkjyGqEWQvdncH0G0yMEDdH0P9lWBC7Yr1FOF8I2XZeQvdqZMVPpMUrkuIFefWKO8W8YNYDfpV1cDGgFtrCDAZiubIXCkbV7E8BkuQHBOnuP3vXu3yvGgRo9KYwGLNkyYofCcCi+k2AzPBFAN6Mp5TXiajrkXQRnas7xTiTbAupUbMkt1vKY0t3OYJiDSdeIkj2mM3/ghXQvVPSuRDnBUMGPJecr7YiNmqQIl8UaPczSK6PW1nBo+ZhaiVUKQEVZE4Lhc4PAdll7mHzdIAR5/CKnKbHhWSk8OINDH8ON1ojTPeQzBifhkOSPb6UzD08BdsSgPX2mzCF5T8Qqyij78UBWfkKP9nSnYuh6gjGfP6L4UA+xYZnud59ozwuxMny0+UKU88XUuPsmYB/kFFs0nc40UoQ6mNzLpld5lAzUECmtM8vsLMKUbWGl3Ykt4MTLqHYuSiels+PI+E2O3+MjdnHhk3xq0Y4HJPTXNxL7lda/BCxscM3Zyd0p7k1fV+KFzF7npwecGJr9DCtLFpdXjkTfWTZ4ZziM2tgxpUYuSDZIc6fUda/SW5H/X2iKP0NN+5wPZYue6jTNmGGTl6L8eO9yLPsljU5XAsmzJCNCSngQ8UWZgxoeTCpo8tHyTYBEkNeDgKIAUl6Tj3llcZmPeoeMTzAi/bEjGa6/CWYsevvW+doyqmHbArn0C1qIbnc7MQd9/PRoI1elqjpc1bP4SUzMS2cT3b6kuExh0W36+UyEEuORSZb+huwUTUd5osd0qpFWm5E4Nmg3uW7i2CbSBe8bd5ks1zeiTyORlxAshw0K9qLtNLSOocV0Z2ZiYD3kofaG0OZ/qSYYdJ2QiYDaWEKn/KXVk8kryMjaPyCCF+VKfVTpecU4Szn8W2varjinXevWbBpEmQ3oO1Ms+sEmLoh9cyh7x79XboY0zmx+c6jcvGgu+Lk35/XP7S8NWmMTKv4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='출력_현재가' title='출력_현재가' src='/static/c71289aa6612fe4ef96277fa5f9d667a/ca1dc/013-01.png' srcset='/static/c71289aa6612fe4ef96277fa5f9d667a/e7570/013-01.png 170w,\n/static/c71289aa6612fe4ef96277fa5f9d667a/f46e7/013-01.png 340w,\n/static/c71289aa6612fe4ef96277fa5f9d667a/ca1dc/013-01.png 680w,\n/static/c71289aa6612fe4ef96277fa5f9d667a/3e3fe/013-01.png 860w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>출력_현재가</figcaption>\n  </figure></p>\n<h3>계좌 조회</h3>\n<p>계좌 조회간 API_ACCESS_KEY, API_SECRET_KEY 가 필요하다.\n아래에 키값을 입력하고 조회해보자</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> jwt\n<span class=\"token keyword\">import</span> hashlib\n<span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> requests\n<span class=\"token keyword\">import</span> uuid\n<span class=\"token keyword\">from</span> urllib<span class=\"token punctuation\">.</span>parse <span class=\"token keyword\">import</span> urlencode<span class=\"token punctuation\">,</span> unquote\n\n\nos<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'UPBIT_OPEN_API_ACCESS_KEY'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"API_ACCESS_KEY 입력\"</span>\nos<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'UPBIT_OPEN_API_SECRET_KEY'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"API_SECRET_KEY 입력\"</span>\nos<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'UPBIT_OPEN_API_SERVER_URL'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"https://api.upbit.com\"</span>\naccess_key <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'UPBIT_OPEN_API_ACCESS_KEY'</span><span class=\"token punctuation\">]</span>\nsecret_key <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'UPBIT_OPEN_API_SECRET_KEY'</span><span class=\"token punctuation\">]</span>\nserver_url <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'UPBIT_OPEN_API_SERVER_URL'</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token comment\"># 전계좌 조회</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">getMyBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span>\n\n    params <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n\n    payload <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'access_key'</span><span class=\"token punctuation\">:</span> access_key<span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'nonce'</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>uuid<span class=\"token punctuation\">.</span>uuid4<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    jwt_token <span class=\"token operator\">=</span> jwt<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">,</span> secret_key<span class=\"token punctuation\">)</span>\n    authorization <span class=\"token operator\">=</span> <span class=\"token string\">'Bearer {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>jwt_token<span class=\"token punctuation\">)</span>\n    headers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'Authorization'</span><span class=\"token punctuation\">:</span> authorization<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    res <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>server_url <span class=\"token operator\">+</span> <span class=\"token string\">'/v1/accounts'</span><span class=\"token punctuation\">,</span>params<span class=\"token operator\">=</span>params<span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\ngetMyBalance<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#  계좌조회</span></code></pre></div>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/e1ac0756accc5c822e5bb5f024c6361e/f91ec/013-02.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 110.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAADrElEQVR42n1VaXPiVhD0D0kl2cXGHGsOSeg+ERISGLzxBbaxjU1S+3Ur+f/V6Xky8pXKh6kHhdSvZ7qnOTgejnCsm+gMTXieh6Ohga99XdUX1uHAwBGryefk7I5MDF0bA8fCwP1cB/JgS7dwrI1gRDZM30HuxCjdBN/9FIbpQR+5uAwm6Bu2uuRLT0ejb+DwP6oGbBFQjy0kkY9dMsNTUmI3nsE0XYxDfv/+A6vlX5gVG6TJEsfDirV02HxTB8KsZkjAIPRwHWTYJgWW/hj9kYcpAU74TN9w0NdtxfSILzfItjGoxtKU0Qjgu5YJ6BPwPipwE+VYhRnmXoKrMIdteejoHEe2RlE8YF7cI00vMM1voJt+PWcyNNHmjRWgrQAf4wJ30RQPPNdhBbzmBXfxFOu4xNP4FL4Tqc+7dIERL2vsAdUctIqh/tKyAArILUGkHghUsv0xQX5mC2Q8pc0e39MVGfM9wxbn0tXJ0PfgxRHnZKmZqbnxN42za9FW8oJhuOqzAEp9/WCrGrBFL45iB1bgIrACxHaAqRtjQLAef1+TsUb7/NrXahGaHxRWDEWQzogMCGwkNuLIwzMt80iVn2kbi7ZJghLPix3OZ4+YTu8455IvV8w+lgKsigwTR83whoL8SbDzcIIeFZwmZxiIwc2AAgQwLb/23ycf9pwAWhArUdwiQpqNscuX2OYLbLI5zsh0QyH8IOFqJchml9DSDB1e0OW7HduHYOzrQCzTZVuyKWbqIox9mrqkRQq2XeKGCq+o9JrnHcFXZL5KS2i0iig/D1Jmwb5Lq2pZQKVlmWEQuniiv8TYG7Z+T6AtwRfc65wi/ZMtcUqm0uqIglkU6t0M2wrZxolpw0kiGE5lkyEvqcqByZfa4lWCOGy1rZm1ZSSVPqncFpXpQzNxYTFtxnaICc0raydJI7a5kOThc7/0BmqHm4NXENnhvY3qlvebEtI2snayKRu2KiChn+Nm9oDz02fk+S2ieKls878+fN1lF1dMG1m/JQf+jQzTeAHdCmE7Y1omJGuP2acplnvbHL1l+ApYpY2IsaEYl2Q5YdheMCBknhIAUXqFSblFOrnmHHX89pLq9epJux3a5m3aiMq3BJVMlJWTumJdE/gyZthmf2AS5GrGkpknxDj8NEN+0SRtOMMtAdcvSSO2kRg7419AQbv8TZPP3UiJYLP1mAJ2iVEDtg0BdBie3BSmTY/fXa6b2ENOm2fAVZPU6dAuEhrfaKGGso2O3z+0/C9yyt8mMrwIIgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='출력_계좌조회' title='출력_계좌조회' src='/static/e1ac0756accc5c822e5bb5f024c6361e/ca1dc/013-02.png' srcset='/static/e1ac0756accc5c822e5bb5f024c6361e/e7570/013-02.png 170w,\n/static/e1ac0756accc5c822e5bb5f024c6361e/f46e7/013-02.png 340w,\n/static/e1ac0756accc5c822e5bb5f024c6361e/ca1dc/013-02.png 680w,\n/static/e1ac0756accc5c822e5bb5f024c6361e/f91ec/013-02.png 714w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>출력_계좌조회</figcaption>\n  </figure></p>","frontmatter":{"title":"업비트 오픈 API 연동하기","date":"2023.06.22 5:10:00","update":"2023.06.22 5:10:00","tags":["coinbot","python","api"],"series":"코인봇 만들기","seq":"1","category":"python"},"fields":{"slug":"/013-connect-upbit-api/","readingTime":{"minutes":1.63}}},"seriesList":{"edges":[{"node":{"id":"b4703cbe-8633-5d5f-bd57-72546bc63595","fields":{"slug":"/013-connect-upbit-api/"},"frontmatter":{"title":"업비트 오픈 API 연동하기","seq":"1"}}}]},"previous":{"fields":{"slug":"/012-fix-git-remote/"},"frontmatter":{"title":"오류 : Failed to get remote.origin.url"}},"next":{"fields":{"slug":"/014-start-gatsby/"},"frontmatter":{"title":"gatsby 블로그 만들기"}}},"pageContext":{"id":"b4703cbe-8633-5d5f-bd57-72546bc63595","series":"코인봇 만들기","previousPostId":"9a1b7de1-9b04-5880-a15d-9d57f8941048","nextPostId":"678fddd6-e4ef-5900-bd6f-13f848d26d99"}},"staticQueryHashes":[]}